@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://worldhealthorganization.github.io/ddcc/StructureMap/QRespToVSCoreDataSet> a fhir:StructureMap;
  fhir:nodeRole fhir:treeRoot;
  fhir:Resource.id [ fhir:value "QRespToVSCoreDataSet"];
  fhir:Resource.meta [
     fhir:Meta.versionId [ fhir:value "1" ];
     fhir:Meta.lastUpdated [ fhir:value "2022-03-01T19:17:58.292+00:00"^^xsd:dateTime ]
  ];
  fhir:DomainResource.text [
     fhir:Narrative.status [ fhir:value "generated" ];
     fhir:Narrative.div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><pre>map &quot;http://worldhealthorganization.github.io/ddcc/StructureMap/QRespToVSCoreDataSet&quot; = &quot;QRespToVSCoreDataSet&quot;\r\n\r\n\r\nuses &quot;http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse&quot; alias QResp as source\r\nuses &quot;http://worldhealthorganization.github.io/ddcc/StructureDefinition/DDCCCoreDataSet.VS.CoC&quot; alias DDCC as target\r\n\r\ngroup QRespToCoreDataSet(source qr : QResp, target ddcc : DDCC) {\r\n  qr as src then QRespToHeader(src, ddcc) &quot;set header content&quot;;\r\n  qr as src -&gt; ddcc.vaccination as vaccination then QRespToVaccination(src, vaccination) &quot;set vaccination content&quot;;\r\n  qr as src -&gt; ddcc.certificate as certificate then QRespToCertificate(src, certificate) &quot;set certificate content&quot;;\r\n}\r\n\r\ngroup QRespToHeader(source qr, target ddcc) {\r\n  qr.item as item then {\r\n    item.answer first as answer where item.linkId = 'name' then {\r\n      answer.valueString as content -&gt; ddcc.name = content &quot;set name&quot;;\r\n    } &quot;first answser for name&quot;;\r\n    item.answer first as answer where item.linkId = 'birthDate' then {\r\n      answer.valueDate as content -&gt; ddcc.birthDate = content &quot;set birthDate&quot;;\r\n    } &quot;first answer for birthDate&quot;;\r\n    item.answer first as answer where item.linkId = 'identifier' -&gt; ddcc.identifier as identifier then {\r\n      answer.valueString as content -&gt; identifier.value = content &quot;set identifier&quot;;\r\n    } &quot;first answer for identifier&quot;;\r\n    item.answer first as answer where item.linkId = 'sex' then {\r\n      answer.valueCoding as coding then {\r\n        coding.code as content -&gt; ddcc.sex = content &quot;set sex&quot;;\r\n      } &quot;process coding&quot;;\r\n    } &quot;first answer for sex&quot;;\r\n  } &quot;header items&quot;;\r\n}\r\n\r\ngroup QRespToVaccination(source qr, target vaccination) {\r\n  qr.item as item then {\r\n    item.answer first as answer where item.linkId = 'vaccine' then {\r\n      answer.valueCoding as content -&gt; vaccination.vaccine = content &quot;set vaccine&quot;;\r\n    } &quot;first answer for vaccine&quot;;\r\n    item.answer first as answer where item.linkId = 'brand' then {\r\n      answer.valueCoding as content -&gt; vaccination.brand = content &quot;set brand&quot;;\r\n    } &quot;first answer for brand&quot;;\r\n    item.answer first as answer where item.linkId = 'manufacturer' then {\r\n      answer.valueCoding as content -&gt; vaccination.manufacturer = content &quot;set manufacturer&quot;;\r\n    } &quot;first answer for manufacturer&quot;;\r\n    item.answer first as answer where item.linkId = 'ma_holder' then {\r\n      answer.valueCoding as content -&gt; vaccination.maholder = content &quot;set maholder&quot;;\r\n    } &quot;first answer for maholder&quot;;\r\n    item.answer first as answer where item.linkId = 'lot' then {\r\n      answer.valueString as content -&gt; vaccination.lot = content &quot;set lot&quot;;\r\n    } &quot;first answser for lot&quot;;\r\n    item.answer first as answer where item.linkId = 'date' then {\r\n      answer.valueDate as content -&gt; vaccination.date = content &quot;set date&quot;;\r\n    } &quot;first answer for date&quot;;\r\n    item.answer first as answer where item.linkId = 'vaccine_valid' then {\r\n      answer.valueDate as content -&gt; vaccination.validFrom = content &quot;set validFrom&quot;;\r\n    } &quot;first answer for validFrom&quot;;\r\n    item.answer first as answer where item.linkId = 'dose' then {\r\n      answer.valueInteger as content -&gt; vaccination.dose = content &quot;set dose&quot;;\r\n    } &quot;first answer for dose&quot;;\r\n    item.answer first as answer where item.linkId = 'total_doses' then {\r\n      answer.valueInteger as content -&gt; vaccination.totalDoses = content &quot;set totalDoses&quot;;\r\n    } &quot;first answer for totalDoses&quot;;\r\n    item.answer first as answer where item.linkId = 'country' then {\r\n      answer.valueCoding as content -&gt; vaccination.country = content &quot;set country&quot;;\r\n    } &quot;first answer for country&quot;;\r\n    item.answer first as answer where item.linkId = 'centre' then {\r\n      answer.valueString as content -&gt; vaccination.centre = content &quot;set centre&quot;;\r\n    } &quot;first answser for centre&quot;;\r\n    item.answer first as answer where item.linkId = 'hw' -&gt; vaccination.practitioner as identifier then {\r\n      answer.valueString as content -&gt; identifier.value = content &quot;set practitioner&quot;;\r\n    } &quot;first answser for practitioner&quot;;\r\n    item.answer first as answer where item.linkId = 'disease' then {\r\n      answer.valueCoding as content -&gt; vaccination.disease = content &quot;set disease&quot;;\r\n    } &quot;first answer for disease&quot;;\r\n    item.answer first as answer where item.linkId = 'due_date' then {\r\n      answer.valueDate as content -&gt; vaccination.nextDose = content &quot;set nextDose&quot;;\r\n    } &quot;first answer for nextDose&quot;;\r\n  } &quot;vaccination items&quot;;\r\n}\r\n\r\ngroup QRespToPeriod(source qr, target period) {\r\n  qr.item as item then {\r\n    item.answer first as answer where item.linkId = 'valid_from' then {\r\n      answer.valueDate as content -&gt; period.start = content &quot;set valid_from&quot;;\r\n    } &quot;first answer for valid_from&quot;;\r\n    item.answer first as answer where item.linkId = 'valid_until' then {\r\n      answer.valueDate as content -&gt; period.end = content &quot;set valid_until&quot;;\r\n    } &quot;first answer for valid_until&quot;;\r\n  } &quot;vaccination validity items&quot;;\r\n}\r\n\r\ngroup QRespToCertificate(source qr, target certificate) {\r\n  qr.item as item then {\r\n    item.answer first as answer where item.linkId = 'pha' -&gt; certificate.issuer as issuer then {\r\n      answer.valueString as content -&gt; issuer.identifier as identifier then {\r\n        content as value -&gt; identifier.value = value &quot;set issuer identifier&quot;;\r\n      } &quot;set issuer&quot;;\r\n    } &quot;first answser for hcid&quot;;\r\n    item.answer first as answer where item.linkId = 'hcid' -&gt; certificate.hcid as hcid then {\r\n      answer.valueString as content -&gt;  hcid.value = content,  certificate.version = 'RC2' &quot;set hcid and version&quot;;\r\n    } &quot;first answser for hcid&quot;;\r\n  } &quot;certificate items&quot;;\r\n  qr as src -&gt; certificate.period as period then QRespToPeriod(src, period) &quot;set vaccination period&quot;;\r\n}\r\n\r\n</pre></div>"
  ];
  fhir:StructureMap.url [ fhir:value "http://worldhealthorganization.github.io/ddcc/StructureMap/QRespToVSCoreDataSet"];
  fhir:StructureMap.version [ fhir:value "1.0.0"];
  fhir:StructureMap.name [ fhir:value "QRespToVSCoreDataSet"];
  fhir:StructureMap.status [ fhir:value "draft"];
  fhir:StructureMap.date [ fhir:value "2022-11-23T04:25:10+00:00"^^xsd:dateTime];
  fhir:StructureMap.publisher [ fhir:value "WHO"];
  fhir:StructureMap.contact [
     fhir:index 0;
     fhir:ContactDetail.name [ fhir:value "WHO" ];
     fhir:ContactDetail.telecom [
       fhir:index 0;
       fhir:ContactPoint.system [ fhir:value "url" ];
       fhir:ContactPoint.value [ fhir:value "http://who.int" ]
     ]
  ];
  fhir:StructureMap.jurisdiction [
     fhir:index 0;
     fhir:CodeableConcept.coding [
       fhir:index 0;
       fhir:Coding.system [ fhir:value "http://unstats.un.org/unsd/methods/m49/m49.htm" ];
       fhir:Coding.code [ fhir:value "001" ]
     ]
  ];
  fhir:StructureMap.structure [
     fhir:index 0;
     fhir:StructureMap.structure.url [
       fhir:value "http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse";
       fhir:link <http://hl7.org/fhir/StructureDefinition/QuestionnaireResponse>
     ];
     fhir:StructureMap.structure.mode [ fhir:value "source" ];
     fhir:StructureMap.structure.alias [ fhir:value "QResp" ]
  ], [
     fhir:index 1;
     fhir:StructureMap.structure.url [
       fhir:value "http://worldhealthorganization.github.io/ddcc/StructureDefinition/DDCCCoreDataSet.VS.CoC";
       fhir:link <http://worldhealthorganization.github.io/ddcc/StructureDefinition/DDCCCoreDataSet.VS.CoC>
     ];
     fhir:StructureMap.structure.mode [ fhir:value "target" ];
     fhir:StructureMap.structure.alias [ fhir:value "DDCC" ]
  ];
  fhir:StructureMap.group [
     fhir:index 0;
     fhir:StructureMap.group.name [ fhir:value "QRespToCoreDataSet" ];
     fhir:StructureMap.group.typeMode [ fhir:value "none" ];
     fhir:StructureMap.group.input [
       fhir:index 0;
       fhir:StructureMap.group.input.name [ fhir:value "qr" ];
       fhir:StructureMap.group.input.type [ fhir:value "QResp" ];
       fhir:StructureMap.group.input.mode [ fhir:value "source" ]
     ], [
       fhir:index 1;
       fhir:StructureMap.group.input.name [ fhir:value "ddcc" ];
       fhir:StructureMap.group.input.type [ fhir:value "DDCC" ];
       fhir:StructureMap.group.input.mode [ fhir:value "target" ]
     ];
     fhir:StructureMap.group.rule [
       fhir:index 0;
       fhir:StructureMap.group.rule.name [ fhir:value "set header content" ];
       fhir:StructureMap.group.rule.source [
         fhir:index 0;
         fhir:StructureMap.group.rule.source.context [ fhir:value "qr" ];
         fhir:StructureMap.group.rule.source.variable [ fhir:value "src" ]
       ];
       fhir:StructureMap.group.rule.dependent [
         fhir:index 0;
         fhir:StructureMap.group.rule.dependent.name [ fhir:value "QRespToHeader" ];
         fhir:StructureMap.group.rule.dependent.variable [
           fhir:value "src";
           fhir:index 0;
           fhir:Element.extension [
             fhir:index 0;
             fhir:Extension.url [ fhir:value "http://hl7.org/fhir/tools/StructureDefinition/original-item-type" ];
             fhir:Extension.valueUrl [ fhir:value "id" ]
           ]
         ], [
           fhir:value "ddcc";
           fhir:index 1;
           fhir:Element.extension [
             fhir:index 0;
             fhir:Extension.url [ fhir:value "http://hl7.org/fhir/tools/StructureDefinition/original-item-type" ];
             fhir:Extension.valueUrl [ fhir:value "id" ]
           ]
         ]
       ]
     ], [
       fhir:index 1;
       fhir:StructureMap.group.rule.name [ fhir:value "set vaccination content" ];
       fhir:StructureMap.group.rule.source [
         fhir:index 0;
         fhir:StructureMap.group.rule.source.context [ fhir:value "qr" ];
         fhir:StructureMap.group.rule.source.variable [ fhir:value "src" ]
       ];
       fhir:StructureMap.group.rule.target [
         fhir:index 0;
         fhir:StructureMap.group.rule.target.context [ fhir:value "ddcc" ];
         fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
         fhir:StructureMap.group.rule.target.element [ fhir:value "vaccination" ];
         fhir:StructureMap.group.rule.target.variable [ fhir:value "vaccination" ]
       ];
       fhir:StructureMap.group.rule.dependent [
         fhir:index 0;
         fhir:StructureMap.group.rule.dependent.name [ fhir:value "QRespToVaccination" ];
         fhir:StructureMap.group.rule.dependent.variable [
           fhir:value "src";
           fhir:index 0;
           fhir:Element.extension [
             fhir:index 0;
             fhir:Extension.url [ fhir:value "http://hl7.org/fhir/tools/StructureDefinition/original-item-type" ];
             fhir:Extension.valueUrl [ fhir:value "id" ]
           ]
         ], [
           fhir:value "vaccination";
           fhir:index 1;
           fhir:Element.extension [
             fhir:index 0;
             fhir:Extension.url [ fhir:value "http://hl7.org/fhir/tools/StructureDefinition/original-item-type" ];
             fhir:Extension.valueUrl [ fhir:value "id" ]
           ]
         ]
       ]
     ], [
       fhir:index 2;
       fhir:StructureMap.group.rule.name [ fhir:value "set certificate content" ];
       fhir:StructureMap.group.rule.source [
         fhir:index 0;
         fhir:StructureMap.group.rule.source.context [ fhir:value "qr" ];
         fhir:StructureMap.group.rule.source.variable [ fhir:value "src" ]
       ];
       fhir:StructureMap.group.rule.target [
         fhir:index 0;
         fhir:StructureMap.group.rule.target.context [ fhir:value "ddcc" ];
         fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
         fhir:StructureMap.group.rule.target.element [ fhir:value "certificate" ];
         fhir:StructureMap.group.rule.target.variable [ fhir:value "certificate" ]
       ];
       fhir:StructureMap.group.rule.dependent [
         fhir:index 0;
         fhir:StructureMap.group.rule.dependent.name [ fhir:value "QRespToCertificate" ];
         fhir:StructureMap.group.rule.dependent.variable [
           fhir:value "src";
           fhir:index 0;
           fhir:Element.extension [
             fhir:index 0;
             fhir:Extension.url [ fhir:value "http://hl7.org/fhir/tools/StructureDefinition/original-item-type" ];
             fhir:Extension.valueUrl [ fhir:value "id" ]
           ]
         ], [
           fhir:value "certificate";
           fhir:index 1;
           fhir:Element.extension [
             fhir:index 0;
             fhir:Extension.url [ fhir:value "http://hl7.org/fhir/tools/StructureDefinition/original-item-type" ];
             fhir:Extension.valueUrl [ fhir:value "id" ]
           ]
         ]
       ]
     ]
  ], [
     fhir:index 1;
     fhir:StructureMap.group.name [ fhir:value "QRespToHeader" ];
     fhir:StructureMap.group.typeMode [ fhir:value "none" ];
     fhir:StructureMap.group.input [
       fhir:index 0;
       fhir:StructureMap.group.input.name [ fhir:value "qr" ];
       fhir:StructureMap.group.input.mode [ fhir:value "source" ]
     ], [
       fhir:index 1;
       fhir:StructureMap.group.input.name [ fhir:value "ddcc" ];
       fhir:StructureMap.group.input.mode [ fhir:value "target" ]
     ];
     fhir:StructureMap.group.rule [
       fhir:index 0;
       fhir:StructureMap.group.rule.name [ fhir:value "header items" ];
       fhir:StructureMap.group.rule.source [
         fhir:index 0;
         fhir:StructureMap.group.rule.source.context [ fhir:value "qr" ];
         fhir:StructureMap.group.rule.source.element [ fhir:value "item" ];
         fhir:StructureMap.group.rule.source.variable [ fhir:value "item" ]
       ];
       fhir:StructureMap.group.rule.rule [
         fhir:index 0;
         fhir:StructureMap.group.rule.name [ fhir:value "first answser for name" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'name'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set name" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueString" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "ddcc" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "name" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 1;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for birthDate" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'birthDate'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set birthDate" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueDate" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "ddcc" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "birthDate" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 2;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for identifier" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'identifier'" ]
         ];
         fhir:StructureMap.group.rule.target [
           fhir:index 0;
           fhir:StructureMap.group.rule.target.context [ fhir:value "ddcc" ];
           fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
           fhir:StructureMap.group.rule.target.element [ fhir:value "identifier" ];
           fhir:StructureMap.group.rule.target.variable [ fhir:value "identifier" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set identifier" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueString" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "identifier" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "value" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 3;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for sex" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'sex'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "process coding" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueCoding" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "coding" ]
           ];
           fhir:StructureMap.group.rule.rule [
             fhir:index 0;
             fhir:StructureMap.group.rule.name [ fhir:value "set sex" ];
             fhir:StructureMap.group.rule.source [
               fhir:index 0;
               fhir:StructureMap.group.rule.source.context [ fhir:value "coding" ];
               fhir:StructureMap.group.rule.source.element [ fhir:value "code" ];
               fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
             ];
             fhir:StructureMap.group.rule.target [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.context [ fhir:value "ddcc" ];
               fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
               fhir:StructureMap.group.rule.target.element [ fhir:value "sex" ];
               fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
               fhir:StructureMap.group.rule.target.parameter [
                 fhir:index 0;
                 fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
               ]
             ]
           ]
         ]
       ]
     ]
  ], [
     fhir:index 2;
     fhir:StructureMap.group.name [ fhir:value "QRespToVaccination" ];
     fhir:StructureMap.group.typeMode [ fhir:value "none" ];
     fhir:StructureMap.group.input [
       fhir:index 0;
       fhir:StructureMap.group.input.name [ fhir:value "qr" ];
       fhir:StructureMap.group.input.mode [ fhir:value "source" ]
     ], [
       fhir:index 1;
       fhir:StructureMap.group.input.name [ fhir:value "vaccination" ];
       fhir:StructureMap.group.input.mode [ fhir:value "target" ]
     ];
     fhir:StructureMap.group.rule [
       fhir:index 0;
       fhir:StructureMap.group.rule.name [ fhir:value "vaccination items" ];
       fhir:StructureMap.group.rule.source [
         fhir:index 0;
         fhir:StructureMap.group.rule.source.context [ fhir:value "qr" ];
         fhir:StructureMap.group.rule.source.element [ fhir:value "item" ];
         fhir:StructureMap.group.rule.source.variable [ fhir:value "item" ]
       ];
       fhir:StructureMap.group.rule.rule [
         fhir:index 0;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for vaccine" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'vaccine'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set vaccine" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueCoding" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "vaccine" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 1;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for brand" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'brand'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set brand" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueCoding" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "brand" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 2;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for manufacturer" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'manufacturer'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set manufacturer" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueCoding" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "manufacturer" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 3;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for maholder" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'ma_holder'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set maholder" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueCoding" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "maholder" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 4;
         fhir:StructureMap.group.rule.name [ fhir:value "first answser for lot" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'lot'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set lot" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueString" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "lot" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 5;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for date" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'date'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set date" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueDate" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "date" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 6;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for validFrom" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'vaccine_valid'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set validFrom" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueDate" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "validFrom" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 7;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for dose" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'dose'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set dose" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueInteger" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "dose" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 8;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for totalDoses" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'total_doses'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set totalDoses" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueInteger" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "totalDoses" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 9;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for country" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'country'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set country" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueCoding" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "country" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 10;
         fhir:StructureMap.group.rule.name [ fhir:value "first answser for centre" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'centre'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set centre" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueString" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "centre" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 11;
         fhir:StructureMap.group.rule.name [ fhir:value "first answser for practitioner" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'hw'" ]
         ];
         fhir:StructureMap.group.rule.target [
           fhir:index 0;
           fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
           fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
           fhir:StructureMap.group.rule.target.element [ fhir:value "practitioner" ];
           fhir:StructureMap.group.rule.target.variable [ fhir:value "identifier" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set practitioner" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueString" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "identifier" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "value" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 12;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for disease" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'disease'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set disease" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueCoding" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "disease" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 13;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for nextDose" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'due_date'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set nextDose" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueDate" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "vaccination" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "nextDose" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ]
     ]
  ], [
     fhir:index 3;
     fhir:StructureMap.group.name [ fhir:value "QRespToPeriod" ];
     fhir:StructureMap.group.typeMode [ fhir:value "none" ];
     fhir:StructureMap.group.input [
       fhir:index 0;
       fhir:StructureMap.group.input.name [ fhir:value "qr" ];
       fhir:StructureMap.group.input.mode [ fhir:value "source" ]
     ], [
       fhir:index 1;
       fhir:StructureMap.group.input.name [ fhir:value "period" ];
       fhir:StructureMap.group.input.mode [ fhir:value "target" ]
     ];
     fhir:StructureMap.group.rule [
       fhir:index 0;
       fhir:StructureMap.group.rule.name [ fhir:value "vaccination validity items" ];
       fhir:StructureMap.group.rule.source [
         fhir:index 0;
         fhir:StructureMap.group.rule.source.context [ fhir:value "qr" ];
         fhir:StructureMap.group.rule.source.element [ fhir:value "item" ];
         fhir:StructureMap.group.rule.source.variable [ fhir:value "item" ]
       ];
       fhir:StructureMap.group.rule.rule [
         fhir:index 0;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for valid_from" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'valid_from'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set valid_from" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueDate" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "period" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "start" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ], [
         fhir:index 1;
         fhir:StructureMap.group.rule.name [ fhir:value "first answer for valid_until" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'valid_until'" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set valid_until" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueDate" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "period" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "end" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ]
         ]
       ]
     ]
  ], [
     fhir:index 4;
     fhir:StructureMap.group.name [ fhir:value "QRespToCertificate" ];
     fhir:StructureMap.group.typeMode [ fhir:value "none" ];
     fhir:StructureMap.group.input [
       fhir:index 0;
       fhir:StructureMap.group.input.name [ fhir:value "qr" ];
       fhir:StructureMap.group.input.mode [ fhir:value "source" ]
     ], [
       fhir:index 1;
       fhir:StructureMap.group.input.name [ fhir:value "certificate" ];
       fhir:StructureMap.group.input.mode [ fhir:value "target" ]
     ];
     fhir:StructureMap.group.rule [
       fhir:index 0;
       fhir:StructureMap.group.rule.name [ fhir:value "certificate items" ];
       fhir:StructureMap.group.rule.source [
         fhir:index 0;
         fhir:StructureMap.group.rule.source.context [ fhir:value "qr" ];
         fhir:StructureMap.group.rule.source.element [ fhir:value "item" ];
         fhir:StructureMap.group.rule.source.variable [ fhir:value "item" ]
       ];
       fhir:StructureMap.group.rule.rule [
         fhir:index 0;
         fhir:StructureMap.group.rule.name [ fhir:value "first answser for hcid" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'pha'" ]
         ];
         fhir:StructureMap.group.rule.target [
           fhir:index 0;
           fhir:StructureMap.group.rule.target.context [ fhir:value "certificate" ];
           fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
           fhir:StructureMap.group.rule.target.element [ fhir:value "issuer" ];
           fhir:StructureMap.group.rule.target.variable [ fhir:value "issuer" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set issuer" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueString" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "issuer" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "identifier" ];
             fhir:StructureMap.group.rule.target.variable [ fhir:value "identifier" ]
           ];
           fhir:StructureMap.group.rule.rule [
             fhir:index 0;
             fhir:StructureMap.group.rule.name [ fhir:value "set issuer identifier" ];
             fhir:StructureMap.group.rule.source [
               fhir:index 0;
               fhir:StructureMap.group.rule.source.context [ fhir:value "content" ];
               fhir:StructureMap.group.rule.source.variable [ fhir:value "value" ]
             ];
             fhir:StructureMap.group.rule.target [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.context [ fhir:value "identifier" ];
               fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
               fhir:StructureMap.group.rule.target.element [ fhir:value "value" ];
               fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
               fhir:StructureMap.group.rule.target.parameter [
                 fhir:index 0;
                 fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "value" ]
               ]
             ]
           ]
         ]
       ], [
         fhir:index 1;
         fhir:StructureMap.group.rule.name [ fhir:value "first answser for hcid" ];
         fhir:StructureMap.group.rule.source [
           fhir:index 0;
           fhir:StructureMap.group.rule.source.context [ fhir:value "item" ];
           fhir:StructureMap.group.rule.source.element [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.listMode [ fhir:value "first" ];
           fhir:StructureMap.group.rule.source.variable [ fhir:value "answer" ];
           fhir:StructureMap.group.rule.source.condition [ fhir:value "item.linkId = 'hcid'" ]
         ];
         fhir:StructureMap.group.rule.target [
           fhir:index 0;
           fhir:StructureMap.group.rule.target.context [ fhir:value "certificate" ];
           fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
           fhir:StructureMap.group.rule.target.element [ fhir:value "hcid" ];
           fhir:StructureMap.group.rule.target.variable [ fhir:value "hcid" ]
         ];
         fhir:StructureMap.group.rule.rule [
           fhir:index 0;
           fhir:StructureMap.group.rule.name [ fhir:value "set hcid and version" ];
           fhir:StructureMap.group.rule.source [
             fhir:index 0;
             fhir:StructureMap.group.rule.source.context [ fhir:value "answer" ];
             fhir:StructureMap.group.rule.source.element [ fhir:value "valueString" ];
             fhir:StructureMap.group.rule.source.variable [ fhir:value "content" ]
           ];
           fhir:StructureMap.group.rule.target [
             fhir:index 0;
             fhir:StructureMap.group.rule.target.context [ fhir:value "hcid" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "value" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueId [ fhir:value "content" ]
             ]
           ], [
             fhir:index 1;
             fhir:StructureMap.group.rule.target.context [ fhir:value "certificate" ];
             fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
             fhir:StructureMap.group.rule.target.element [ fhir:value "version" ];
             fhir:StructureMap.group.rule.target.transform [ fhir:value "copy" ];
             fhir:StructureMap.group.rule.target.parameter [
               fhir:index 0;
               fhir:StructureMap.group.rule.target.parameter.valueString [ fhir:value "RC2" ]
             ]
           ]
         ]
       ]
     ], [
       fhir:index 1;
       fhir:StructureMap.group.rule.name [ fhir:value "set vaccination period" ];
       fhir:StructureMap.group.rule.source [
         fhir:index 0;
         fhir:StructureMap.group.rule.source.context [ fhir:value "qr" ];
         fhir:StructureMap.group.rule.source.variable [ fhir:value "src" ]
       ];
       fhir:StructureMap.group.rule.target [
         fhir:index 0;
         fhir:StructureMap.group.rule.target.context [ fhir:value "certificate" ];
         fhir:StructureMap.group.rule.target.contextType [ fhir:value "variable" ];
         fhir:StructureMap.group.rule.target.element [ fhir:value "period" ];
         fhir:StructureMap.group.rule.target.variable [ fhir:value "period" ]
       ];
       fhir:StructureMap.group.rule.dependent [
         fhir:index 0;
         fhir:StructureMap.group.rule.dependent.name [ fhir:value "QRespToPeriod" ];
         fhir:StructureMap.group.rule.dependent.variable [
           fhir:value "src";
           fhir:index 0;
           fhir:Element.extension [
             fhir:index 0;
             fhir:Extension.url [ fhir:value "http://hl7.org/fhir/tools/StructureDefinition/original-item-type" ];
             fhir:Extension.valueUrl [ fhir:value "id" ]
           ]
         ], [
           fhir:value "period";
           fhir:index 1;
           fhir:Element.extension [
             fhir:index 0;
             fhir:Extension.url [ fhir:value "http://hl7.org/fhir/tools/StructureDefinition/original-item-type" ];
             fhir:Extension.valueUrl [ fhir:value "id" ]
           ]
         ]
       ]
     ]
  ] .

# - ontology header ------------------------------------------------------------

<http://worldhealthorganization.github.io/ddcc/StructureMap/QRespToVSCoreDataSet.ttl> a owl:Ontology;
  owl:imports fhir:fhir.ttl .

# -------------------------------------------------------------------------------------

