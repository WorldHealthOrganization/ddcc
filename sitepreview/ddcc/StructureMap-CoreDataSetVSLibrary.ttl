@prefix fhir: <http://hl7.org/fhir/> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# - resource -------------------------------------------------------------------

<http://smart.who.int/ddcc/StructureMap/CoreDataSetVSLibrary> a fhir:StructureMap ;
  fhir:nodeRole fhir:treeRoot ;
  fhir:id [ fhir:v "CoreDataSetVSLibrary"] ; # 
  fhir:text [
     fhir:status [ fhir:v "generated" ] ;
     fhir:div "<div xmlns=\"http://www.w3.org/1999/xhtml\"><p class=\"res-header-id\"><b>Generated Narrative: StructureMap CoreDataSetVSLibrary</b></p><a name=\"CoreDataSetVSLibrary\"> </a><a name=\"hcCoreDataSetVSLibrary\"> </a><a name=\"CoreDataSetVSLibrary-en-US\"> </a><pre class=\"fml\">\r\n<b>map</b><span style=\"color: navy\"> &quot;</span>http://smart.who.int/ddcc/StructureMap/CoreDataSetVSLibrary<span style=\"color: navy\">&quot; = &quot;</span>CoreDataSetVSLibrary<span style=\"color: navy\">&quot;\r\n\r\n</span><b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"StructureDefinition-DDCCCoreDataSetVS.html\" title=\"DDCC Core Data Set Logical Model for Vaccination Status\">http://smart.who.int/ddcc/StructureDefinition/DDCCCoreDataSetVS</a><span style=\"color: navy\">&quot; </span><b>alias </b>DDCCVS <b>as </b><b>source</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"http://hl7.org/fhir/R4/bundle.html\" title=\"Bundle\">http://hl7.org/fhir/StructureDefinition/Bundle</a><span style=\"color: navy\">&quot; </span><b>alias </b>AddBundle <b>as </b><b>target</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"http://hl7.org/fhir/R4/patient.html\" title=\"Patient\">http://hl7.org/fhir/StructureDefinition/Patient</a><span style=\"color: navy\">&quot; </span><b>alias </b>Patient <b>as </b><b>target</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"StructureDefinition-DDCCPatient.html\" title=\"DDCC Patient\">http://smart.who.int/ddcc/StructureDefinition/DDCCPatient</a><span style=\"color: navy\">&quot; </span><b>alias </b>DDCCPatient <b>as </b><b>target</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"StructureDefinition-DDCCDocumentReferenceQR.html\" title=\"DDCC DocumentReference return for QR\">http://smart.who.int/ddcc/StructureDefinition/DDCCDocumentReferenceQR</a><span style=\"color: navy\">&quot; </span><b>alias </b>DDCCDocRefQR <b>as </b><b>target</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"StructureDefinition-DDCCVSComposition.html\" title=\"DDCC:VS Composition\">http://smart.who.int/ddcc/StructureDefinition/DDCCVSComposition</a><span style=\"color: navy\">&quot; </span><b>alias </b>DDCCVSComposition <b>as </b><b>target</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"StructureDefinition-DDCCImmunization.html\" title=\"DDCC Immunization\">http://smart.who.int/ddcc/StructureDefinition/DDCCImmunization</a><span style=\"color: navy\">&quot; </span><b>alias </b>DDCCImmunization <b>as </b><b>target</b>\r\n<b>uses</b><span style=\"color: navy\"> &quot;</span><a href=\"StructureDefinition-DDCCImmunizationRecommendation.html\" title=\"DDCC Immunization Recommendation\">http://smart.who.int/ddcc/StructureDefinition/DDCCImmunizationRecommendation</a><span style=\"color: navy\">&quot; </span><b>alias </b>DDCCImmRec <b>as </b><b>target</b>\r\n\r\n<b>imports</b><span style=\"color: navy\"> &quot;</span><a href=\"StructureMap-CoreDataSetLibrary.html\" title=\"CoreDataSetLibrary\">http://smart.who.int/ddcc/StructureMap/CoreDataSetLibrary</a><span style=\"color: navy\">&quot;\r\n</span>\r\n<b>group </b>VSToAddBundle<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">ddcc</span><span style=\"color: navy\"> : </span>DDCCVS, <b>target</b> <span style=\"color: maroon\">bundle</span><span style=\"color: navy\"> : </span>AddBundle<span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  ddcc<span style=\"color: navy\"><b> -&gt; </b></span>bundle.type = <span style=\"color: blue\">'transaction'</span> <i>&quot;set bundle type&quot;</i><span style=\"color: navy\">;</span>\r\n  ddcc<span style=\"color: navy\"><b> -&gt; </b></span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">pid</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">compid</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">iid</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">irid</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">qrwhoid</span><span style=\"color: navy\">, </span> <b>uuid</b><span style=\"color: navy\">(</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">qrdccid</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    ddcc<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.request<b> as </b><span style=\"color: maroon\">request</span><span style=\"color: navy\">, </span> request.method = <span style=\"color: blue\">'PUT'</span><span style=\"color: navy\">, </span> request.url = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCPatient'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">patient</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      ddcc<b> then </b>DDCCToPatient<span style=\"color: navy\">(</span><span style=\"color: maroon\">ddcc</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;setup patient&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">patient</span> <i>&quot;set patient resource&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;create patient resource&quot;</i><span style=\"color: navy\">;</span>\r\n    ddcc<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">compid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.request<b> as </b><span style=\"color: maroon\">request</span><span style=\"color: navy\">, </span> request.method = <span style=\"color: blue\">'PUT'</span><span style=\"color: navy\">, </span> request.url = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Composition/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">compid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCVSComposition'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">comp</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      ddcc<b> then </b>DDCCToComposition<span style=\"color: navy\">(</span><span style=\"color: maroon\">ddcc</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">comp</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">compid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;setup composition&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span> comp.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://smart.who.int/ddcc/CodeSystem/DDCCCompositionCategoryCodeSystem'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'ddcc-vs'</span> <i>&quot;set category&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>comp.title = <span style=\"color: blue\">'International Certificate of Vaccination or Prophylaxis'</span> <i>&quot;set title&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>comp.section<b> as </b><span style=\"color: maroon\">section</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        ddcc<span style=\"color: navy\"><b> -&gt; </b></span> section.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\">, </span> code.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://loinc.org'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'11369-6'</span> <i>&quot;set code&quot;</i><span style=\"color: navy\">;</span>\r\n        ddcc.certificate<b> as </b><span style=\"color: maroon\">certificate</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          certificate.issuer<b> as </b><span style=\"color: maroon\">issuer</span><span style=\"color: navy\"><b> -&gt; </b></span>section.author = <span style=\"color: maroon\">issuer</span> <i>&quot;set author&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set certificate&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: #b36b00\" title=\"This element was not defined prior to R5\">// ddcc.certificate as certificate -&gt; section.author as author then {             certificate.issuer as issuer then {               issuer.identifier as pha -&gt; author.identifier as identifier, author.type = &quot;Organization&quot; then {                 pha.value as value -&gt; identifier.value = value &quot;set pha&quot;;               } &quot;set author identifier&quot;;             } &quot;set author ref&quot;;                        } &quot;set author&quot;;</span>\r\n        ddcc<span style=\"color: navy\"><b> -&gt; </b></span> section.focus<b> as </b><span style=\"color: maroon\">focus</span><span style=\"color: navy\">, </span> focus.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Immunization/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">iid</span><span style=\"color: navy\">)</span> <i>&quot;set focus&quot;</i><span style=\"color: navy\">;</span>\r\n        ddcc<span style=\"color: navy\"><b> -&gt; </b></span> section.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Immunization/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">iid</span><span style=\"color: navy\">)</span> <i>&quot;add Immunization entry&quot;</i><span style=\"color: navy\">;</span>\r\n        ddcc<span style=\"color: navy\"><b> -&gt; </b></span> section.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'ImmunizationRecommendation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">irid</span><span style=\"color: navy\">)</span> <i>&quot;add ImmunizationRecommendation entry&quot;</i><span style=\"color: navy\">;</span>\r\n        ddcc<span style=\"color: navy\"><b> -&gt; </b></span> section.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'DocumentReference/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qrwhoid</span><span style=\"color: navy\">)</span> <i>&quot;add WHO QR entry&quot;</i><span style=\"color: navy\">;</span>\r\n        ddcc<span style=\"color: navy\"><b> -&gt; </b></span> section.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'DocumentReference/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qrdccid</span><span style=\"color: navy\">)</span> <i>&quot;add DCC QR entry&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set section&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">comp</span> <i>&quot;set composition resource&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;create composition resource&quot;</i><span style=\"color: navy\">;</span>\r\n    ddcc<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qrwhoid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.request<b> as </b><span style=\"color: maroon\">request</span><span style=\"color: navy\">, </span> request.method = <span style=\"color: blue\">'PUT'</span><span style=\"color: navy\">, </span> request.url = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'DocumentReference/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qrwhoid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCDocumentReferenceQR'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">qr</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      ddcc<b> then </b>DDCCToDocumentReference<span style=\"color: navy\">(</span><span style=\"color: maroon\">ddcc</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qr</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qrwhoid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;setup WHO DocRef&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span> qr.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://smart.who.int/ddcc/CodeSystem/DDCCQRCategoryUsageCodeSystem'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'who'</span> <i>&quot;set category&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>qr.description = <span style=\"color: blue\">'WHO QR code for COVID 19 Vaccine Certificate'</span> <i>&quot;set description&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">qr</span> <i>&quot;set WHO QR&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;create WHO QR Doc Ref&quot;</i><span style=\"color: navy\">;</span>\r\n    ddcc<span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qrdccid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.request<b> as </b><span style=\"color: maroon\">request</span><span style=\"color: navy\">, </span> request.method = <span style=\"color: blue\">'PUT'</span><span style=\"color: navy\">, </span> request.url = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'DocumentReference/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qrdccid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCDocumentReferenceQR'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">qr</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      ddcc<b> then </b>DDCCToDocumentReference<span style=\"color: navy\">(</span><span style=\"color: maroon\">ddcc</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qr</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">qrdccid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;setup DCC DocRef&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span> qr.category<b> as </b><span style=\"color: maroon\">category</span><span style=\"color: navy\">, </span> category.coding<b> as </b><span style=\"color: maroon\">coding</span><span style=\"color: navy\">, </span> coding.system = <span style=\"color: blue\">'http://smart.who.int/ddcc/CodeSystem/DDCCQRCategoryUsageCodeSystem'</span><span style=\"color: navy\">, </span> coding.code = <span style=\"color: blue\">'dcc'</span> <i>&quot;set category&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>qr.description = <span style=\"color: blue\">'DCC QR code for COVID 19 Vaccine Certificate'</span> <i>&quot;set description&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">qr</span> <i>&quot;set DCC QR&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;create DCC QR Doc Ref&quot;</i><span style=\"color: navy\">;</span>\r\n    ddcc.vaccination first<b> as </b><span style=\"color: maroon\">vaccination</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">iid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.request<b> as </b><span style=\"color: maroon\">request</span><span style=\"color: navy\">, </span> request.method = <span style=\"color: blue\">'PUT'</span><span style=\"color: navy\">, </span> request.url = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Immunization/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">iid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCImmunization'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">immunization</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      ddcc.certificate<b> as </b><span style=\"color: maroon\">certificate</span><b> then </b>DDCCToImmunization<span style=\"color: navy\">(</span><span style=\"color: maroon\">vaccination</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immunization</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">certificate</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">iid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;setup immunization&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">immunization</span> <i>&quot;set immunization resource&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;create immunization resource&quot;</i><span style=\"color: navy\">;</span>\r\n    ddcc.vaccination first<b> as </b><span style=\"color: maroon\">vaccination</span><span style=\"color: navy\"><b> -&gt; </b></span> bundle.entry<b> as </b><span style=\"color: maroon\">entry</span><span style=\"color: navy\">, </span> entry.fullUrl = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'urn:uuid:'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">irid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> entry.request<b> as </b><span style=\"color: maroon\">request</span><span style=\"color: navy\">, </span> request.method = <span style=\"color: blue\">'PUT'</span><span style=\"color: navy\">, </span> request.url = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'ImmunizationRecommendation/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">irid</span><span style=\"color: navy\">)</span><span style=\"color: navy\">, </span> <b>create</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCImmunizationRecommendation'</span><span style=\"color: navy\">)</span><b> as </b><span style=\"color: maroon\">immrec</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      vaccination<b> then </b>DDCCToImmRec<span style=\"color: navy\">(</span><span style=\"color: maroon\">vaccination</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">immrec</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">irid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">iid</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;setup immunization recommendation&quot;</i><span style=\"color: navy\">;</span>\r\n      ddcc<span style=\"color: navy\"><b> -&gt; </b></span>entry.resource = <span style=\"color: maroon\">immrec</span> <i>&quot;set immunization recommendation resource&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;create immunization recommendation resource&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set uuids&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>DDCCToImmunization<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">immunization</span><span style=\"color: navy\"> : </span>DDCCImmunization, <b>source</b> <span style=\"color: maroon\">certificate</span>, <b>source</b> <span style=\"color: maroon\">iid</span>, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  iid<span style=\"color: navy\"><b> -&gt; </b></span>immunization.id = <span style=\"color: maroon\">iid</span> <i>&quot;set id&quot;</i><span style=\"color: navy\">;</span>\r\n  src.brand<b> as </b><span style=\"color: maroon\">brand</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    brand<span style=\"color: navy\"><b> -&gt; </b></span> ext.url = <span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCVaccineBrand'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">brand</span> <i>&quot;set brand extension values&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set brand extension&quot;</i><span style=\"color: navy\">;</span>\r\n  src.maholder<b> as </b><span style=\"color: maroon\">maholder</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    maholder<span style=\"color: navy\"><b> -&gt; </b></span> ext.url = <span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCVaccineMarketAuthorization'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">maholder</span> <i>&quot;set MA Holder extension values&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set maholder extension&quot;</i><span style=\"color: navy\">;</span>\r\n  src.country<b> as </b><span style=\"color: maroon\">country</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    country.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\"><b> -&gt; </b></span> ext.url = <span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCCountryOfVaccination'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">code</span> <i>&quot;set country extension values&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set country extension&quot;</i><span style=\"color: navy\">;</span>\r\n  src.validFrom<b> as </b><span style=\"color: maroon\">validFrom</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.extension<b> as </b><span style=\"color: maroon\">ext</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    validFrom<span style=\"color: navy\"><b> -&gt; </b></span> ext.url = <span style=\"color: blue\">'http://smart.who.int/ddcc/StructureDefinition/DDCCVaccineValidFrom'</span><span style=\"color: navy\">, </span> ext.value = <span style=\"color: maroon\">validFrom</span> <i>&quot;set valid from extension values&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set vaccine valid extension&quot;</i><span style=\"color: navy\">;</span>\r\n  src<span style=\"color: navy\"><b> -&gt; </b></span>immunization.status = <span style=\"color: blue\">'completed'</span> <i>&quot;set status&quot;</i><span style=\"color: navy\">;</span>\r\n  src.vaccine<b> as </b><span style=\"color: maroon\">vaccine</span><span style=\"color: navy\"><b> -&gt; </b></span> immunization.vaccineCode<b> as </b><span style=\"color: maroon\">vacCode</span><span style=\"color: navy\">, </span> vacCode.coding = <span style=\"color: maroon\">vaccine</span> <i>&quot;set vaccine&quot;</i><span style=\"color: navy\">;</span>\r\n  src<span style=\"color: navy\"><b> -&gt; </b></span> immunization.patient<b> as </b><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span> patient.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set patient&quot;</i><span style=\"color: navy\">;</span>\r\n  src.manufacturer<b> as </b><span style=\"color: maroon\">manufacturer</span><span style=\"color: navy\"><b> -&gt; </b></span> immunization.manufacturer<b> as </b><span style=\"color: maroon\">tman</span><span style=\"color: navy\">, </span> tman.identifier<b> as </b><span style=\"color: maroon\">ident</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    manufacturer.system<b> as </b><span style=\"color: maroon\">system</span><span style=\"color: navy\"><b> -&gt; </b></span>ident.system = <span style=\"color: maroon\">system</span> <i>&quot;set system&quot;</i><span style=\"color: navy\">;</span>\r\n    manufacturer.code<b> as </b><span style=\"color: maroon\">code</span><span style=\"color: navy\"><b> -&gt; </b></span>ident.value = <span style=\"color: maroon\">code</span> <i>&quot;set value&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set manufacturer identifier&quot;</i><span style=\"color: navy\">;</span>\r\n  src.lot<b> as </b><span style=\"color: maroon\">lot</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.lotNumber = <span style=\"color: maroon\">lot</span> <i>&quot;set lot number&quot;</i><span style=\"color: navy\">;</span>\r\n  src.date<b> as </b><span style=\"color: maroon\">date</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.occurrence = <span style=\"color: maroon\">date</span> <i>&quot;set occurrence date&quot;</i><span style=\"color: navy\">;</span>\r\n  src.centre<b> as </b><span style=\"color: maroon\">centre</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.location<b> as </b><span style=\"color: maroon\">location</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    centre<span style=\"color: navy\"><b> -&gt; </b></span>location.display = <span style=\"color: maroon\">centre</span> <i>&quot;set location display&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set location&quot;</i><span style=\"color: navy\">;</span>\r\n  src.practitioner<b> as </b><span style=\"color: maroon\">practitioner</span><span style=\"color: navy\"><b> -&gt; </b></span>immunization.performer<b> as </b><span style=\"color: maroon\">performer</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    practitioner.value<b> as </b><span style=\"color: maroon\">hw</span><span style=\"color: navy\"><b> -&gt; </b></span>performer.actor<b> as </b><span style=\"color: maroon\">actor</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      hw<span style=\"color: navy\"><b> -&gt; </b></span> actor.type = <span style=\"color: blue\">'Practitioner'</span><span style=\"color: navy\">, </span> actor.identifier<b> as </b><span style=\"color: maroon\">identifier</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        hw<span style=\"color: navy\"><b> -&gt; </b></span>identifier.value = <span style=\"color: maroon\">hw</span> <i>&quot;set hw identifier&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set actor&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set performer&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set practitioner&quot;</i><span style=\"color: navy\">;</span>\r\n  src<span style=\"color: navy\"><b> -&gt; </b></span>immunization.protocolApplied<b> as </b><span style=\"color: maroon\">protocol</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    src<span style=\"color: navy\"><b> -&gt; </b></span>protocol.authority<b> as </b><span style=\"color: maroon\">authority</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      certificate.issuer<b> as </b><span style=\"color: maroon\">issuer</span><span style=\"color: navy\"><b> -&gt; </b></span>authority.type = <span style=\"color: blue\">'Organization'</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        issuer.identifier<b> as </b><span style=\"color: maroon\">pha</span><span style=\"color: navy\"><b> -&gt; </b></span>authority.identifier<b> as </b><span style=\"color: maroon\">identifier</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          pha.value<b> as </b><span style=\"color: maroon\">value</span><span style=\"color: navy\"><b> -&gt; </b></span>identifier.value = <span style=\"color: maroon\">value</span> <i>&quot;set pha&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set issuer identifier&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set issuer&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set authority&quot;</i><span style=\"color: navy\">;</span>\r\n    src.disease<b> as </b><span style=\"color: maroon\">disease</span><span style=\"color: navy\"><b> -&gt; </b></span>protocol.targetDisease<b> as </b><span style=\"color: maroon\">tdisease</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      disease<span style=\"color: navy\"><b> -&gt; </b></span>tdisease.coding = <span style=\"color: maroon\">disease</span> <i>&quot;set target disease code&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set target disease&quot;</i><span style=\"color: navy\">;</span>\r\n    src.dose<b> as </b><span style=\"color: maroon\">dose</span><span style=\"color: navy\"><b> -&gt; </b></span>protocol.doseNumber = <span style=\"color: maroon\">dose</span> <i>&quot;set dose number&quot;</i><span style=\"color: navy\">;</span>\r\n    src.totalDoses<b> as </b><span style=\"color: maroon\">totalDoses</span><span style=\"color: navy\"><b> -&gt; </b></span>protocol.seriesDoses = <span style=\"color: maroon\">totalDoses</span> <i>&quot;set total doses&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set protocolApplied&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span><b>group </b>DDCCToImmRec<span style=\"color: navy\">(</span><b>source</b> <span style=\"color: maroon\">src</span>, <b>target</b> <span style=\"color: maroon\">immrec</span><span style=\"color: navy\"> : </span>DDCCImmunizationRecommendation, <b>source</b> <span style=\"color: maroon\">irid</span>, <b>source</b> <span style=\"color: maroon\">iid</span>, <b>source</b> <span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span><span style=\"color: navy\"> {\r\n</span>  src.date<b> as </b><span style=\"color: maroon\">date</span><span style=\"color: navy\"><b> -&gt; </b></span>immrec.date = <span style=\"color: maroon\">date</span> <i>&quot;set date&quot;</i><span style=\"color: navy\">;</span>\r\n  src<span style=\"color: navy\"><b> -&gt; </b></span> immrec.patient<b> as </b><span style=\"color: maroon\">patient</span><span style=\"color: navy\">, </span> patient.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Patient/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">pid</span><span style=\"color: navy\">)</span> <i>&quot;set patient&quot;</i><span style=\"color: navy\">;</span>\r\n  src<span style=\"color: navy\"><b> -&gt; </b></span>immrec.recommendation<b> as </b><span style=\"color: maroon\">rec</span><b> then</b><span style=\"color: navy\"> {\r\n</span>    src.vaccine<b> as </b><span style=\"color: maroon\">vaccine</span><span style=\"color: navy\"><b> -&gt; </b></span>rec.vaccineCode<b> as </b><span style=\"color: maroon\">vaccineCode</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      vaccine<span style=\"color: navy\"><b> -&gt; </b></span>vaccineCode.coding = <span style=\"color: maroon\">vaccine</span> <i>&quot;set vaccine code coding&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set vaccine code&quot;</i><span style=\"color: navy\">;</span>\r\n    src.disease<b> as </b><span style=\"color: maroon\">disease</span><span style=\"color: navy\"><b> -&gt; </b></span>rec.targetDisease<b> as </b><span style=\"color: maroon\">targetDisease</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      disease<span style=\"color: navy\"><b> -&gt; </b></span>targetDisease.coding = <span style=\"color: maroon\">disease</span> <i>&quot;set target disease coding&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set target disease&quot;</i><span style=\"color: navy\">;</span>\r\n    src<span style=\"color: navy\"><b> -&gt; </b></span>rec.forecastStatus<b> as </b><span style=\"color: maroon\">forecast</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      src<span style=\"color: navy\"><b> -&gt; </b></span>forecast.coding<b> as </b><span style=\"color: maroon\">coding</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        src<span style=\"color: navy\"><b> -&gt; </b></span>coding.system = <span style=\"color: blue\">'http://terminology.hl7.org/2.1.0/CodeSystem-immunization-recommendation-status.html'</span> <i>&quot;set forecast system&quot;</i><span style=\"color: navy\">;</span>\r\n        src<span style=\"color: navy\"><b> -&gt; </b></span>coding.code = <span style=\"color: blue\">'due'</span> <i>&quot;set forecast code&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set forecast status coding&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set forecast status&quot;</i><span style=\"color: navy\">;</span>\r\n    src<span style=\"color: navy\"><b> -&gt; </b></span>rec.dateCriterion<b> as </b><span style=\"color: maroon\">due_date</span><b> then</b><span style=\"color: navy\"> {\r\n</span>      src<span style=\"color: navy\"><b> -&gt; </b></span>due_date.code<b> as </b><span style=\"color: maroon\">code</span><b> then</b><span style=\"color: navy\"> {\r\n</span>        src<span style=\"color: navy\"><b> -&gt; </b></span>code.coding<b> as </b><span style=\"color: maroon\">coding</span><b> then</b><span style=\"color: navy\"> {\r\n</span>          src<span style=\"color: navy\"><b> -&gt; </b></span>coding.system = <span style=\"color: blue\">'http://loinc.org'</span> <i>&quot;set due date code system&quot;</i><span style=\"color: navy\">;</span>\r\n          src<span style=\"color: navy\"><b> -&gt; </b></span>coding.code = <span style=\"color: blue\">'30980-7'</span> <i>&quot;set due date code code&quot;</i><span style=\"color: navy\">;</span>\r\n        <span style=\"color: navy\">}</span> <i>&quot;set due date code coding&quot;</i><span style=\"color: navy\">;</span>\r\n      <span style=\"color: navy\">}</span> <i>&quot;set due date code&quot;</i><span style=\"color: navy\">;</span>\r\n      src.nextDose<b> as </b><span style=\"color: maroon\">nextDose</span><span style=\"color: navy\"><b> -&gt; </b></span>due_date.value = <span style=\"color: maroon\">nextDose</span> <i>&quot;set due date value&quot;</i><span style=\"color: navy\">;</span>\r\n    <span style=\"color: navy\">}</span> <i>&quot;set date criterion&quot;</i><span style=\"color: navy\">;</span>\r\n    src.dose<b> as </b><span style=\"color: maroon\">dose</span><span style=\"color: navy\"><b> -&gt; </b></span>rec.doseNumber = <span style=\"color: navy\">(</span>dose.toInteger() + 1<span style=\"color: navy\">)</span> <i>&quot;set dose number&quot;</i><span style=\"color: navy\">;</span>\r\n    src.totalDoses<b> as </b><span style=\"color: maroon\">totalDoses</span><span style=\"color: navy\"><b> -&gt; </b></span>rec.seriesDoses = <span style=\"color: maroon\">totalDoses</span> <i>&quot;set total doses&quot;</i><span style=\"color: navy\">;</span>\r\n    src<span style=\"color: navy\"><b> -&gt; </b></span> rec.supportingImmunization<b> as </b><span style=\"color: maroon\">imm</span><span style=\"color: navy\">, </span> imm.reference = <b>append</b><span style=\"color: navy\">(</span><span style=\"color: blue\">'Immunization/'</span><span style=\"color: navy\">, </span><span style=\"color: maroon\">iid</span><span style=\"color: navy\">)</span> <i>&quot;set supporting immunization&quot;</i><span style=\"color: navy\">;</span>\r\n  <span style=\"color: navy\">}</span> <i>&quot;set recommendation&quot;</i><span style=\"color: navy\">;</span>\r\n<span style=\"color: navy\">}\r\n\r\n</span></pre></div>"
  ] ; # 
  fhir:url [ fhir:v "http://smart.who.int/ddcc/StructureMap/CoreDataSetVSLibrary"^^xsd:anyURI] ; # 
  fhir:version [ fhir:v "1.0.0"] ; # 
  fhir:name [ fhir:v "CoreDataSetVSLibrary"] ; # 
  fhir:status [ fhir:v "draft"] ; # 
  fhir:date [ fhir:v "2024-10-17T06:56:04+00:00"^^xsd:dateTime] ; # 
  fhir:publisher [ fhir:v "WHO"] ; # 
  fhir:contact ( [
     fhir:name [ fhir:v "WHO" ] ;
     fhir:telecom ( [
       fhir:system [ fhir:v "url" ] ;
       fhir:value [ fhir:v "http://who.int" ]
     ] )
  ] ) ; # 
  fhir:jurisdiction ( [
     fhir:coding ( [
       fhir:system [ fhir:v "http://unstats.un.org/unsd/methods/m49/m49.htm"^^xsd:anyURI ] ;
       fhir:code [ fhir:v "001" ]
     ] )
  ] ) ; # 
  fhir:structure ( [
     fhir:url [
       fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCCoreDataSetVS"^^xsd:anyURI ;
       fhir:link <http://smart.who.int/ddcc/StructureDefinition/DDCCCoreDataSetVS>
     ] ;
     fhir:mode [ fhir:v "source" ] ;
     fhir:alias [ fhir:v "DDCCVS" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Bundle"^^xsd:anyURI ;
       fhir:link <http://hl7.org/fhir/StructureDefinition/Bundle>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "AddBundle" ]
  ] [
     fhir:url [
       fhir:v "http://hl7.org/fhir/StructureDefinition/Patient"^^xsd:anyURI ;
       fhir:link <http://hl7.org/fhir/StructureDefinition/Patient>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "Patient" ]
  ] [
     fhir:url [
       fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCPatient"^^xsd:anyURI ;
       fhir:link <http://smart.who.int/ddcc/StructureDefinition/DDCCPatient>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "DDCCPatient" ]
  ] [
     fhir:url [
       fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCDocumentReferenceQR"^^xsd:anyURI ;
       fhir:link <http://smart.who.int/ddcc/StructureDefinition/DDCCDocumentReferenceQR>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "DDCCDocRefQR" ]
  ] [
     fhir:url [
       fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCVSComposition"^^xsd:anyURI ;
       fhir:link <http://smart.who.int/ddcc/StructureDefinition/DDCCVSComposition>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "DDCCVSComposition" ]
  ] [
     fhir:url [
       fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCImmunization"^^xsd:anyURI ;
       fhir:link <http://smart.who.int/ddcc/StructureDefinition/DDCCImmunization>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "DDCCImmunization" ]
  ] [
     fhir:url [
       fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCImmunizationRecommendation"^^xsd:anyURI ;
       fhir:link <http://smart.who.int/ddcc/StructureDefinition/DDCCImmunizationRecommendation>
     ] ;
     fhir:mode [ fhir:v "target" ] ;
     fhir:alias [ fhir:v "DDCCImmRec" ]
  ] ) ; # 
  fhir:import ( [
     fhir:v "http://smart.who.int/ddcc/StructureMap/CoreDataSetLibrary"^^xsd:anyURI ;
     fhir:link <http://smart.who.int/ddcc/StructureMap/CoreDataSetLibrary>
  ] ) ; # 
  fhir:group ( [
     fhir:name [ fhir:v "VSToAddBundle" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "ddcc" ] ;
       fhir:type [ fhir:v "DDCCVS" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "bundle" ] ;
       fhir:type [ fhir:v "AddBundle" ] ;
       fhir:mode [ fhir:v "target" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set bundle type" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "ddcc" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "bundle" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "type" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "transaction" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set uuids" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "ddcc" ]
       ] ) ;
       fhir:target ( [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "pid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "compid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "iid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "irid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "qrwhoid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] [
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:variable [ fhir:v "qrdccid" ] ;
         fhir:transform [ fhir:v "uuid" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "create patient resource" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "ddcc" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "entry" ]
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "urn:uuid:" ]
           ] [
             fhir:value [ fhir:v "pid" ]
           ] )
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "request" ] ;
           fhir:variable [ fhir:v "request" ]
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "method" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "PUT" ]
           ] )
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Patient/" ]
           ] [
             fhir:value [ fhir:v "pid" ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "patient" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCPatient" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "setup patient" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "DDCCToPatient" ] ;
             fhir:variable ( [ fhir:v "ddcc" ] [ fhir:v "patient" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set patient resource" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "patient" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "create composition resource" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "ddcc" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "entry" ]
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "urn:uuid:" ]
           ] [
             fhir:value [ fhir:v "compid" ]
           ] )
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "request" ] ;
           fhir:variable [ fhir:v "request" ]
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "method" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "PUT" ]
           ] )
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Composition/" ]
           ] [
             fhir:value [ fhir:v "compid" ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "comp" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCVSComposition" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "setup composition" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "DDCCToComposition" ] ;
             fhir:variable ( [ fhir:v "ddcc" ] [ fhir:v "comp" ] [ fhir:v "compid" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set category" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "comp" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "http://smart.who.int/ddcc/CodeSystem/DDCCCompositionCategoryCodeSystem" ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "ddcc-vs" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set title" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "comp" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "title" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "International Certificate of Vaccination or Prophylaxis" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set section" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "comp" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "section" ] ;
             fhir:variable [ fhir:v "section" ]
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set code" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "ddcc" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "section" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:variable [ fhir:v "code" ]
             ] [
               fhir:context [ fhir:v "code" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "coding" ] ;
               fhir:variable [ fhir:v "coding" ]
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://loinc.org" ]
               ] )
             ] [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "11369-6" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set certificate" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "ddcc" ] ;
               fhir:element [ fhir:v "certificate" ] ;
               fhir:variable [ fhir:v "certificate" ]
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set author" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "certificate" ] ;
                 fhir:element [ fhir:v "issuer" ] ;
                 fhir:variable [ fhir:v "issuer" ]
               ] ) ;
               fhir:target ( [
                 fhir:context [ fhir:v "section" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "author" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "issuer" ]
                 ] )
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set focus" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "ddcc" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "section" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "focus" ] ;
               fhir:variable [ fhir:v "focus" ]
             ] [
               fhir:context [ fhir:v "focus" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "append" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Immunization/" ]
               ] [
                 fhir:value [ fhir:v "iid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "add Immunization entry" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "ddcc" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "section" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "entry" ] ;
               fhir:variable [ fhir:v "entry" ]
             ] [
               fhir:context [ fhir:v "entry" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "append" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "Immunization/" ]
               ] [
                 fhir:value [ fhir:v "iid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "add ImmunizationRecommendation entry" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "ddcc" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "section" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "entry" ] ;
               fhir:variable [ fhir:v "entry" ]
             ] [
               fhir:context [ fhir:v "entry" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "append" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "ImmunizationRecommendation/" ]
               ] [
                 fhir:value [ fhir:v "irid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "add WHO QR entry" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "ddcc" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "section" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "entry" ] ;
               fhir:variable [ fhir:v "entry" ]
             ] [
               fhir:context [ fhir:v "entry" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "append" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DocumentReference/" ]
               ] [
                 fhir:value [ fhir:v "qrwhoid" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "add DCC QR entry" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "ddcc" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "section" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "entry" ] ;
               fhir:variable [ fhir:v "entry" ]
             ] [
               fhir:context [ fhir:v "entry" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "reference" ] ;
               fhir:transform [ fhir:v "append" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "DocumentReference/" ]
               ] [
                 fhir:value [ fhir:v "qrdccid" ]
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set composition resource" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "comp" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "create WHO QR Doc Ref" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "ddcc" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "entry" ]
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "urn:uuid:" ]
           ] [
             fhir:value [ fhir:v "qrwhoid" ]
           ] )
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "request" ] ;
           fhir:variable [ fhir:v "request" ]
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "method" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "PUT" ]
           ] )
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "DocumentReference/" ]
           ] [
             fhir:value [ fhir:v "qrwhoid" ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "qr" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCDocumentReferenceQR" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "setup WHO DocRef" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "DDCCToDocumentReference" ] ;
             fhir:variable ( [ fhir:v "ddcc" ] [ fhir:v "qr" ] [ fhir:v "qrwhoid" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set category" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "qr" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "http://smart.who.int/ddcc/CodeSystem/DDCCQRCategoryUsageCodeSystem" ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "who" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set description" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "qr" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "description" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "WHO QR code for COVID 19 Vaccine Certificate" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set WHO QR" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "qr" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "create DCC QR Doc Ref" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "ddcc" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "entry" ]
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "urn:uuid:" ]
           ] [
             fhir:value [ fhir:v "qrdccid" ]
           ] )
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "request" ] ;
           fhir:variable [ fhir:v "request" ]
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "method" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "PUT" ]
           ] )
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "DocumentReference/" ]
           ] [
             fhir:value [ fhir:v "qrdccid" ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "qr" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCDocumentReferenceQR" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "setup DCC DocRef" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "DDCCToDocumentReference" ] ;
             fhir:variable ( [ fhir:v "ddcc" ] [ fhir:v "qr" ] [ fhir:v "qrdccid" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set category" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "qr" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "category" ] ;
             fhir:variable [ fhir:v "category" ]
           ] [
             fhir:context [ fhir:v "category" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "system" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "http://smart.who.int/ddcc/CodeSystem/DDCCQRCategoryUsageCodeSystem" ]
             ] )
           ] [
             fhir:context [ fhir:v "coding" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "dcc" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set description" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "qr" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "description" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "DCC QR code for COVID 19 Vaccine Certificate" ]
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set DCC QR" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "qr" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "create immunization resource" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "ddcc" ] ;
           fhir:element [ fhir:v "vaccination" ] ;
           fhir:listMode [ fhir:v "first" ] ;
           fhir:variable [ fhir:v "vaccination" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "entry" ]
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "urn:uuid:" ]
           ] [
             fhir:value [ fhir:v "iid" ]
           ] )
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "request" ] ;
           fhir:variable [ fhir:v "request" ]
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "method" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "PUT" ]
           ] )
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Immunization/" ]
           ] [
             fhir:value [ fhir:v "iid" ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "immunization" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCImmunization" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "setup immunization" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ] ;
             fhir:element [ fhir:v "certificate" ] ;
             fhir:variable [ fhir:v "certificate" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "DDCCToImmunization" ] ;
             fhir:variable ( [ fhir:v "vaccination" ] [ fhir:v "immunization" ] [ fhir:v "certificate" ] [ fhir:v "iid" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set immunization resource" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "immunization" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "create immunization recommendation resource" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "ddcc" ] ;
           fhir:element [ fhir:v "vaccination" ] ;
           fhir:listMode [ fhir:v "first" ] ;
           fhir:variable [ fhir:v "vaccination" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "bundle" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "entry" ] ;
           fhir:variable [ fhir:v "entry" ]
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "fullUrl" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "urn:uuid:" ]
           ] [
             fhir:value [ fhir:v "irid" ]
           ] )
         ] [
           fhir:context [ fhir:v "entry" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "request" ] ;
           fhir:variable [ fhir:v "request" ]
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "method" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "PUT" ]
           ] )
         ] [
           fhir:context [ fhir:v "request" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "ImmunizationRecommendation/" ]
           ] [
             fhir:value [ fhir:v "irid" ]
           ] )
         ] [
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:variable [ fhir:v "immrec" ] ;
           fhir:transform [ fhir:v "create" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCImmunizationRecommendation" ]
           ] )
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "setup immunization recommendation" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vaccination" ]
           ] ) ;
           fhir:dependent ( [
             fhir:name [ fhir:v "DDCCToImmRec" ] ;
             fhir:variable ( [ fhir:v "vaccination" ] [ fhir:v "immrec" ] [ fhir:v "irid" ] [ fhir:v "iid" ] [ fhir:v "pid" ] )
           ] )
         ] [
           fhir:name [ fhir:v "set immunization recommendation resource" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "ddcc" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "entry" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "resource" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "immrec" ]
             ] )
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "DDCCToImmunization" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immunization" ] ;
       fhir:type [ fhir:v "DDCCImmunization" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "certificate" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "iid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set id" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "iid" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "id" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "iid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set brand extension" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "brand" ] ;
         fhir:variable [ fhir:v "brand" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "extension" ] ;
         fhir:variable [ fhir:v "ext" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set brand extension values" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "brand" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCVaccineBrand" ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "brand" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set maholder extension" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "maholder" ] ;
         fhir:variable [ fhir:v "maholder" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "extension" ] ;
         fhir:variable [ fhir:v "ext" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set MA Holder extension values" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "maholder" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCVaccineMarketAuthorization" ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "maholder" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set country extension" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "country" ] ;
         fhir:variable [ fhir:v "country" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "extension" ] ;
         fhir:variable [ fhir:v "ext" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set country extension values" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "country" ] ;
           fhir:element [ fhir:v "code" ] ;
           fhir:variable [ fhir:v "code" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCCountryOfVaccination" ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "code" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set vaccine valid extension" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "validFrom" ] ;
         fhir:variable [ fhir:v "validFrom" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "extension" ] ;
         fhir:variable [ fhir:v "ext" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set valid from extension values" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "validFrom" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "url" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "http://smart.who.int/ddcc/StructureDefinition/DDCCVaccineValidFrom" ]
           ] )
         ] [
           fhir:context [ fhir:v "ext" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "validFrom" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set status" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "status" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "completed" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set vaccine" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "vaccine" ] ;
         fhir:variable [ fhir:v "vaccine" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "vaccineCode" ] ;
         fhir:variable [ fhir:v "vacCode" ]
       ] [
         fhir:context [ fhir:v "vacCode" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "coding" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "vaccine" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set patient" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "patient" ] ;
         fhir:variable [ fhir:v "patient" ]
       ] [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Patient/" ]
         ] [
           fhir:value [ fhir:v "pid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set manufacturer identifier" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "manufacturer" ] ;
         fhir:variable [ fhir:v "manufacturer" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "manufacturer" ] ;
         fhir:variable [ fhir:v "tman" ]
       ] [
         fhir:context [ fhir:v "tman" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "identifier" ] ;
         fhir:variable [ fhir:v "ident" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set system" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "manufacturer" ] ;
           fhir:element [ fhir:v "system" ] ;
           fhir:variable [ fhir:v "system" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ident" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "system" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "system" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set value" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "manufacturer" ] ;
           fhir:element [ fhir:v "code" ] ;
           fhir:variable [ fhir:v "code" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "ident" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "code" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set lot number" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "lot" ] ;
         fhir:variable [ fhir:v "lot" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "lotNumber" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "lot" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set occurrence date" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "date" ] ;
         fhir:variable [ fhir:v "date" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "occurrence" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "date" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set location" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "centre" ] ;
         fhir:variable [ fhir:v "centre" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "location" ] ;
         fhir:variable [ fhir:v "location" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set location display" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "centre" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "location" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "display" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "centre" ]
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set practitioner" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "practitioner" ] ;
         fhir:variable [ fhir:v "practitioner" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "performer" ] ;
         fhir:variable [ fhir:v "performer" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set performer" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "practitioner" ] ;
           fhir:element [ fhir:v "value" ] ;
           fhir:variable [ fhir:v "hw" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "performer" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "actor" ] ;
           fhir:variable [ fhir:v "actor" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set actor" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "hw" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "actor" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "type" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Practitioner" ]
             ] )
           ] [
             fhir:context [ fhir:v "actor" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "identifier" ] ;
             fhir:variable [ fhir:v "identifier" ]
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set hw identifier" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "hw" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "identifier" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "value" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "hw" ]
               ] )
             ] )
           ] )
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set protocolApplied" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immunization" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "protocolApplied" ] ;
         fhir:variable [ fhir:v "protocol" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set authority" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "protocol" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "authority" ] ;
           fhir:variable [ fhir:v "authority" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set issuer" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "certificate" ] ;
             fhir:element [ fhir:v "issuer" ] ;
             fhir:variable [ fhir:v "issuer" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "authority" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "type" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "Organization" ]
             ] )
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set issuer identifier" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "issuer" ] ;
               fhir:element [ fhir:v "identifier" ] ;
               fhir:variable [ fhir:v "pha" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "authority" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "identifier" ] ;
               fhir:variable [ fhir:v "identifier" ]
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set pha" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "pha" ] ;
                 fhir:element [ fhir:v "value" ] ;
                 fhir:variable [ fhir:v "value" ]
               ] ) ;
               fhir:target ( [
                 fhir:context [ fhir:v "identifier" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "value" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "value" ]
                 ] )
               ] )
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set target disease" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ] ;
           fhir:element [ fhir:v "disease" ] ;
           fhir:variable [ fhir:v "disease" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "protocol" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "targetDisease" ] ;
           fhir:variable [ fhir:v "tdisease" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set target disease code" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "disease" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "tdisease" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "disease" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set dose number" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ] ;
           fhir:element [ fhir:v "dose" ] ;
           fhir:variable [ fhir:v "dose" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "protocol" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "doseNumber" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "dose" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set total doses" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ] ;
           fhir:element [ fhir:v "totalDoses" ] ;
           fhir:variable [ fhir:v "totalDoses" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "protocol" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "seriesDoses" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "totalDoses" ]
           ] )
         ] )
       ] )
     ] )
  ] [
     fhir:name [ fhir:v "DDCCToImmRec" ] ;
     fhir:typeMode [ fhir:v "none" ] ;
     fhir:input ( [
       fhir:name [ fhir:v "src" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "immrec" ] ;
       fhir:type [ fhir:v "DDCCImmunizationRecommendation" ] ;
       fhir:mode [ fhir:v "target" ]
     ] [
       fhir:name [ fhir:v "irid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "iid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] [
       fhir:name [ fhir:v "pid" ] ;
       fhir:mode [ fhir:v "source" ]
     ] ) ;
     fhir:rule ( [
       fhir:name [ fhir:v "set date" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ] ;
         fhir:element [ fhir:v "date" ] ;
         fhir:variable [ fhir:v "date" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immrec" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "date" ] ;
         fhir:transform [ fhir:v "copy" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "date" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set patient" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immrec" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "patient" ] ;
         fhir:variable [ fhir:v "patient" ]
       ] [
         fhir:context [ fhir:v "patient" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "reference" ] ;
         fhir:transform [ fhir:v "append" ] ;
         fhir:parameter ( [
           fhir:value [ fhir:v "Patient/" ]
         ] [
           fhir:value [ fhir:v "pid" ]
         ] )
       ] )
     ] [
       fhir:name [ fhir:v "set recommendation" ] ;
       fhir:source ( [
         fhir:context [ fhir:v "src" ]
       ] ) ;
       fhir:target ( [
         fhir:context [ fhir:v "immrec" ] ;
         fhir:contextType [ fhir:v "variable" ] ;
         fhir:element [ fhir:v "recommendation" ] ;
         fhir:variable [ fhir:v "rec" ]
       ] ) ;
       fhir:rule ( [
         fhir:name [ fhir:v "set vaccine code" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ] ;
           fhir:element [ fhir:v "vaccine" ] ;
           fhir:variable [ fhir:v "vaccine" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "rec" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "vaccineCode" ] ;
           fhir:variable [ fhir:v "vaccineCode" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set vaccine code coding" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "vaccine" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "vaccineCode" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "vaccine" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set target disease" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ] ;
           fhir:element [ fhir:v "disease" ] ;
           fhir:variable [ fhir:v "disease" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "rec" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "targetDisease" ] ;
           fhir:variable [ fhir:v "targetDisease" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set target disease coding" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "disease" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "targetDisease" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "disease" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set forecast status" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "rec" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "forecastStatus" ] ;
           fhir:variable [ fhir:v "forecast" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set forecast status coding" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "src" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "forecast" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "coding" ] ;
             fhir:variable [ fhir:v "coding" ]
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set forecast system" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "src" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "system" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "http://terminology.hl7.org/2.1.0/CodeSystem-immunization-recommendation-status.html" ]
               ] )
             ] )
           ] [
             fhir:name [ fhir:v "set forecast code" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "src" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "coding" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "code" ] ;
               fhir:transform [ fhir:v "copy" ] ;
               fhir:parameter ( [
                 fhir:value [ fhir:v "due" ]
               ] )
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set date criterion" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "rec" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "dateCriterion" ] ;
           fhir:variable [ fhir:v "due_date" ]
         ] ) ;
         fhir:rule ( [
           fhir:name [ fhir:v "set due date code" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "src" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "due_date" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "code" ] ;
             fhir:variable [ fhir:v "code" ]
           ] ) ;
           fhir:rule ( [
             fhir:name [ fhir:v "set due date code coding" ] ;
             fhir:source ( [
               fhir:context [ fhir:v "src" ]
             ] ) ;
             fhir:target ( [
               fhir:context [ fhir:v "code" ] ;
               fhir:contextType [ fhir:v "variable" ] ;
               fhir:element [ fhir:v "coding" ] ;
               fhir:variable [ fhir:v "coding" ]
             ] ) ;
             fhir:rule ( [
               fhir:name [ fhir:v "set due date code system" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "src" ]
               ] ) ;
               fhir:target ( [
                 fhir:context [ fhir:v "coding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "system" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "http://loinc.org" ]
                 ] )
               ] )
             ] [
               fhir:name [ fhir:v "set due date code code" ] ;
               fhir:source ( [
                 fhir:context [ fhir:v "src" ]
               ] ) ;
               fhir:target ( [
                 fhir:context [ fhir:v "coding" ] ;
                 fhir:contextType [ fhir:v "variable" ] ;
                 fhir:element [ fhir:v "code" ] ;
                 fhir:transform [ fhir:v "copy" ] ;
                 fhir:parameter ( [
                   fhir:value [ fhir:v "30980-7" ]
                 ] )
               ] )
             ] )
           ] )
         ] [
           fhir:name [ fhir:v "set due date value" ] ;
           fhir:source ( [
             fhir:context [ fhir:v "src" ] ;
             fhir:element [ fhir:v "nextDose" ] ;
             fhir:variable [ fhir:v "nextDose" ]
           ] ) ;
           fhir:target ( [
             fhir:context [ fhir:v "due_date" ] ;
             fhir:contextType [ fhir:v "variable" ] ;
             fhir:element [ fhir:v "value" ] ;
             fhir:transform [ fhir:v "copy" ] ;
             fhir:parameter ( [
               fhir:value [ fhir:v "nextDose" ]
             ] )
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set dose number" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ] ;
           fhir:element [ fhir:v "dose" ] ;
           fhir:variable [ fhir:v "dose" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "rec" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "doseNumber" ] ;
           fhir:transform [ fhir:v "evaluate" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "dose.toInteger() + 1" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set total doses" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ] ;
           fhir:element [ fhir:v "totalDoses" ] ;
           fhir:variable [ fhir:v "totalDoses" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "rec" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "seriesDoses" ] ;
           fhir:transform [ fhir:v "copy" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "totalDoses" ]
           ] )
         ] )
       ] [
         fhir:name [ fhir:v "set supporting immunization" ] ;
         fhir:source ( [
           fhir:context [ fhir:v "src" ]
         ] ) ;
         fhir:target ( [
           fhir:context [ fhir:v "rec" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "supportingImmunization" ] ;
           fhir:variable [ fhir:v "imm" ]
         ] [
           fhir:context [ fhir:v "imm" ] ;
           fhir:contextType [ fhir:v "variable" ] ;
           fhir:element [ fhir:v "reference" ] ;
           fhir:transform [ fhir:v "append" ] ;
           fhir:parameter ( [
             fhir:value [ fhir:v "Immunization/" ]
           ] [
             fhir:value [ fhir:v "iid" ]
           ] )
         ] )
       ] )
     ] )
  ] ) . # 

# -------------------------------------------------------------------------------------

